<!DOCTYPE html>
<html>
<head>
  <title>Mostrar JSON en Tabla Autom치ticamente</title>
</head>
<body>
  <form id="myForm">
    <button type="submit">Recibir JSON</button>
  </form>

  <div id="tabla-contenedor">
    </div>

  <script>
    function mostrarJSONEnTabla(jsonData) {
      const tablaContenedor = document.getElementById('tabla-contenedor');
      const tabla = document.createElement('table');

      if (jsonData && jsonData.length > 0) {
        const thead = document.createElement('thead');
        const encabezadoFila = document.createElement('tr');
        const columnas = Object.keys(jsonData[0]);

        columnas.forEach(columna => {
          const th = document.createElement('th');
          th.textContent = columna.toUpperCase();
          encabezadoFila.appendChild(th);
        });
        thead.appendChild(encabezadoFila);
        tabla.appendChild(thead);

        const tbody = document.createElement('tbody');
        jsonData.forEach(filaData => {
          const fila = document.createElement('tr');
          columnas.forEach(columna => {
            const celda = document.createElement('td');
            celda.textContent = filaData[columna];
            fila.appendChild(celda);
          });
          tbody.appendChild(fila);
        });
        tabla.appendChild(tbody);

        tablaContenedor.innerHTML = ''; // Limpiar cualquier contenido anterior
        tablaContenedor.appendChild(tabla);
      } else {
        tablaContenedor.textContent = 'No hay datos para mostrar.';
      }
    }

    // Realizar la petici칩n fetch al cargar la p치gina
    fetch("http://localhost:8000/tasks/")
      .then((response) => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then((data) => {
        console.log("Tareas recibidas:", data);
        mostrarJSONEnTabla(data); // Llamar a la funci칩n para mostrar los datos en la tabla
      })
      .catch((error) => {
        console.error("Error al obtener las tareas:", error);
        const tablaContenedor = document.getElementById('tabla-contenedor');
        tablaContenedor.textContent = 'Error al cargar los datos.';
      });
  </script>

</body>
</html>